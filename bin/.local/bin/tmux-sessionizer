#!/usr/bin/env bash

SCAN_DIRECTORIES=("$HOME/Projects/ $HOME/Projects/Development $HOME/Projects/Personal")

if [[ $# -eq 1 ]]; then
    selected=$1
else
    selected=$(find $SCAN_DIRECTORIES -mindepth 1 -maxdepth 1 -type d 2>/dev/null | fzf)
fi

# Nothing selected: exits.
[[ -z $selected ]] && exit 0

selected_name=$(basename "$selected" | tr . _)

# Already inside tmux: switch to the selected session.
[[ -n $TMUX ]] && tmux switch-client -t $selected_name && exit 0

# Not inside a session but session already exists: attach the session.
tmux has-session -t=$selected_name 2> /dev/null && tmux attach -t $selected_name && exit 0

# Not inside a session and session does not exist: create it.
tmux new-session -s $selected_name -c $selected
