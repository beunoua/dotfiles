#!/usr/bin/env zsh
GITLAB_URL="https://gitlab.galaxy.ibpc.fr"

usage() {
  echo "Usage: $0 <project_name> <access_token>"
  echo "  project_name:  Name of the repository to create"
  echo "  access_token:  GitLab API access token"
  exit 1
}

# Check if the correct number of arguments is provided
if [ "$#" -ne 2 ]; then
  usage
fi

PROJECT_NAME=$1
ACCESS_TOKEN=$2

# Create a new project using the GitLab API
curl --request POST --header "PRIVATE-TOKEN: $ACCESS_TOKEN" "$GITLAB_URL/api/v4/projects?name=$PROJECT_NAME&visibility=private"
